<html>
<head>
<title>Recipes</title>
<script>
    function clicked(){
                   var xhr = new XMLHttpRequest();
xhr.open("POST", 'http://localhost:5000/creator', true);
xhr.setRequestHeader('Content-Type', 'application/json');
var False = 0; //cause js has weird info grabbing
var True = 1;
var num = {{rec}}+1;
xhr.send(JSON.stringify({
   // document.getElementsByName("ValBox")[0].value
    name: "{{name}}",
    vege:{{vege}},
    vega : {{vega}},
    pro : {{pro}},   
    carb  : 0,              //currently non-functional
    fat : {{fat}}, 
    alc : {{alc}},    
    bal : {{bal}},
    Tre : {{tre}},
    Pea : {{pea}},
    lowCal : {{loC}},
    highCal : {{hiC}},
    maxItems : {{maxI}},
    recipeNumber : num
}));

xhr.onreadystatechange = function() {
    if (xhr.readyState == XMLHttpRequest.DONE) {

        document.write(xhr.response);

    }
}

    }
    window.onload = function(){
        if("{{nextRec}}"=="final recipe reached"){
            document.getElementById("NR").value = "no new recipes";
            document.getElementById("bigBut").parentNode.removeChild(document.getElementById("bigBut"));
        }
        
    }
    </script>
</head>
<body>

<h1>{{label}}</h1>

<br/>
    <img src={{imgurl}} />
<br />
<br/>
{% for ing in ingredients %}
* {{ing}}<br/>
{% endfor %}

    <p>link to procedure <a href={{procedure}}>{{procedure}}</a></p>
<p>now on recipe </p>
<p id="NR">next recipe: </p>
<button onclick="clicked()" id="bigBut">{{nextRec}}</button>



</body>
</html>
